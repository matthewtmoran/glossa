<md-dialog class="post-dialog" flex="50">
	<form name="postForm" ng-cloak>

		<md-toolbar>
			<div class="md-toolbar-tools">
				<h2>{{dialogVm.postDetails.title}}</h2>
			</div>
		</md-toolbar>

		<md-dialog-content>
			<div class="md-dialog-content">
				<div layout="row">
					<div flex class="upload-selection">
						<div layout="row" layout-align="center center">
							<md-button ngf-select
							           name="imageUpload"
							           required
							           class="md-icon-button"
							           ng-model="dialogVm.notebook.image"
							           accept="image/*">
								<md-icon>camera_alt</md-icon>
							</md-button>
						</div>
						<div flex class="md-padding media-container" ng-if="dialogVm.notebook.image" >
							<md-button class="md-icon-button remove-preview" ng-click="dialogVm.removeMedia(dialogVm.notebook.image); dialogVm.notebook.image = null" >
								<md-icon>cancel</md-icon>
							</md-button>
							<img ng-show="dialogVm.notebook.image" ngf-src="dialogVm.imagePath" class="thumb">
						</div>
					</div>
				</div>

				<md-input-container class="simplemde-wrapper">
					<textarea id="imageCaption"
					          aria-label="text area"
					          class="simplemde-textarea"
					          ng-model="dialogVm.notebook.description"
					          simplemde="dialogVm.editorOptions">
					</textarea>
				</md-input-container>
			</div>
		</md-dialog-content>

		<md-dialog-actions layout="row" class="top-border">
			<md-button ng-click="dialogVm.cancel($event)">Cancel</md-button>
			<md-button ng-disabled="postForm.$invalid"
			           ng-click="dialogVm.postDetails.button.action('Create Image Post')">
				{{dialogVm.postDetails.button.text}}
			</md-button>
		</md-dialog-actions>

	</form>
</md-dialog>
