<div layout-padding="" class="meta-tab">
	<form name="fileMeta">
		<md-input-container class="md-block" flex-gt-sm="">
			<label>File Name</label>
			<input ng-blur="metaVm.update('name', metaVm.currentFile)"
			       ng-model="metaVm.currentFile.displayName"
			       value="metaVm.currentFile.displayName">
		</md-input-container>
		<md-input-container class="md-block">
			<textarea aria-label="textarea"
			          simplemde="metaVm.editorOptions"
			          update-function="metaVm.update('description', metaVm.currentFile)"
			          file-binding="metaVm.currentFile"
			          ng-model="metaVm.currentFile.description"
			          ng-trim="false"
			          autocomplete="off"
			          id="meta-description"
			          rows="5">
			</textarea>
		</md-input-container>
	</form>
	<div layout="row" layout-align="space-between center">
		<md-button ng-click="metaVm.deleteMarkdownFile($event, metaVm.currentFile)" class="md-warn">Delete Text</md-button>
		<md-button ng-disabled="metaVm.currentFile.notebookId || (metaVm.currentFile.image && metaVm.currentFile.audio)" ng-click="metaVm.addAttachment($event)">Attach</md-button>
	</div>
	<div layout="column" class="attached-media">
		<h3>Associated Media</h3>
		<md-content layout="row">
			<!--Independent Media-->
			<md-card flex="50"
			         class="mdl-shadow--2dp attachment-card"
			         ng-repeat="(type, attachment) in metaVm.currentFile.media"
			         ng-if="metaVm.currentFile.media.image || metaVm.currentFile.media.audio">

				<md-card-content class="media-content">
					<md-card-title ng-if="type !== 'image'" class="media-title" layout-align="center space-between">
						<md-card-title-text>
							<span class="md-headline">{{attachment.name}}</span>
							<span class="md-subhead">Independent Media File</span>
						</md-card-title-text>
					</md-card-title>

					<div ng-if="type === 'image'" class="media-image">
						<img ng-src="{{metaVm.currentFile.media.image.path}}" alt="">
					</div>

					<div ng-if="type === 'audio'">
						<wave-preview
								flex
								url="{{metaVm.currentFile.media.audio.path}}"
								auto-play="false"
								player-wave-color="white"
								player-height="150"
								player-progress-color="black">
						</wave-preview>
					</div>

				</md-card-content>
				<span flex></span>

				<md-divider></md-divider>

				<md-card-actions layout="row" layout-align="start center">
					<md-button ng-click="metaVm.removeMedia($event, attachment, type)">Delete</md-button>
				</md-card-actions>

			</md-card><!--Independent Media End-->
			<!--Notebook Attachment-->
			<notebook-card flex="50"
			               ng-if="metaVm.notebookAttachment"
			               notebook="metaVm.notebookAttachment"
			               disconnect-notebook="metaVm.disconnectNotebook(notebook)"
			               view-details="metaVm.viewDetails($event, metaVm.notebookAttachment)"></notebook-card>
		</md-content>
	</div>
	<md-divider></md-divider>

	<pre>
		{{metaVm.currentFile | json}}
	</pre>
</div>