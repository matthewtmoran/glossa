<div class="meta" layout="column" flex>
	<div layout="column" flex ng-if="!$ctrl.currentFile._id" layout-align="center center">
		<h2>Select a text or create a new text</h2>
	</div>
	<form name="fileMeta" ng-if="$ctrl.currentFile._id">
		<md-input-container class="md-block" flex-gt-sm="">
			<label>File Name</label>
			<input ng-blur="$ctrl.update('name', $ctrl.currentFile)"
			       ng-model="$ctrl.currentFile.displayName"
			       value="$ctrl.currentFile.displayName">
		</md-input-container>
		<md-input-container class="md-block">
			<simplemde
					hashtags="$ctrl.hashtags"
					editor-options="$ctrl.editorOptions"
					update-function="$ctrl.update($event)"
					value-binding="$ctrl.currentFile"
					update-model="$ctrl.updateModel($event)">
			</simplemde>
		</md-input-container>
	</form>
	<div ng-if="$ctrl.currentFile._id" layout="row" layout-align="space-between center">
		<md-button ng-click="$ctrl.deleteMarkdown($event)" class="md-warn">Delete Text
		</md-button>
		<md-button ng-disabled="$ctrl.currentFile.notebookId || ($ctrl.currentFile.image && $ctrl.currentFile.audio)"
		           ng-click="$ctrl.addAttachment($event)">Attach
		</md-button>
	</div>
	<div ng-if="$ctrl.currentFile._id" layout="column" class="attached-media">
		<h3>Associated Media</h3>
		<md-content layout="row">
			<!--Independent Media-->
			<!--image-->
			<md-card flex="50"
			         class="mdl-shadow--2dp attachment-card"
			         ng-if="$ctrl.currentFile.image">
				<md-card-content class="media-content">
					<md-card-title class="media-title" layout-align="center space-between">
						<md-card-title-text>
							<span class="md-headline">{{$ctrl.currentFile.image.name}}</span>
							<span class="md-subhead">Independent Media File</span>
						</md-card-title-text>
					</md-card-title>
					<div class="media-image">
						<img ng-src="{{$ctrl.currentFile.image.path}}" alt="">
					</div>
				</md-card-content>
				<span flex></span>
				<md-divider></md-divider>
				<md-card-actions layout="row" layout-align="start center">
					<md-button ng-click="$ctrl.removeMedia($event, $ctrl.currentFile.image, 'image')">Delete</md-button>
				</md-card-actions>
			</md-card>

			<!--audio-->
			<md-card flex="50"
			         class="mdl-shadow--2dp attachment-card"
			         ng-if="$ctrl.currentFile.audio">
				<md-card-content class="media-content">
					<md-card-title class="media-title" layout-align="center space-between">
						<md-card-title-text>
							<span class="md-headline">{{$ctrl.currentFile.audio.name}}</span>
							<span class="md-subhead">Independent Media File</span>
						</md-card-title-text>
					</md-card-title>
					<wave-surfer-preview
							flex
							settings="$ctrl.settings"
							url-src="$ctrl.currentFile.audio.path"
							auto-play="false">
					</wave-surfer-preview>
				</md-card-content>
				<span flex></span>
				<md-divider></md-divider>
				<md-card-actions layout="row" layout-align="start center">
					<md-button ng-click="$ctrl.removeMedia($event, $ctrl.currentFile.audio, 'audio')">Delete</md-button>
				</md-card-actions>
			</md-card>

			<!--Notebook Attachment-->
			<notebook-card flex="50"
			               ng-if="$ctrl.notebookAttached"
			               notebook="$ctrl.notebookAttached"
			               settings="$ctrl.settings"
			               current-user="$ctrl.currentUser"
			               on-disconnect-notebook="$ctrl.disconnectNotebook($event)"
			               on-view-details="$ctrl.viewDetails($event)"
			               on-view-preview="$ctrl.viewDetails($event)">
			</notebook-card>

			<!--<notebook-card unique-users="$ctrl.uniqueUsers"-->
			               <!--notebook="notebook"-->
			               <!--settings="$ctrl.settings"-->
			               <!--current-user="$ctrl.currentUser"-->
			               <!--on-view-details="$ctrl.viewDetails($event)"-->
			               <!--on-view-preview="$ctrl.viewPreview($event)"-->
			               <!--hashtags="$ctrl.hashtags"-->
			               <!--flex-->
			               <!--layout-fill></notebook-card>-->
		</md-content>
	</div>
</div>
